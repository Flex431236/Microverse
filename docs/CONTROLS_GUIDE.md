# 🎮 Microverse 完整操作指南

## 📋 目录
- [基本操作](#基本操作)
- [角色控制](#角色控制)
- [对话系统](#对话系统)
- [相机控制](#相机控制)
- [系统快捷键](#系统快捷键)
- [鼠标操作](#鼠标操作)

---

## 🎯 基本操作

### ⌨️ 键盘布局总览

| 按键 | 功能 | 说明 |
|------|------|------|
| **W / ↑** | 向上移动 | 需先选中角色 |
| **A / ←** | 向左移动 | 需先选中角色 |
| **S / ↓** | 向下移动 | 需先选中角色 |
| **D / →** | 向右移动 | 需先选中角色 |
| **Enter** | 坐下/站起 | 靠近椅子时自动坐到椅子上 |
| **T** | 开始对话 | 与附近角色对话 |
| **L** | 结束对话 | 结束当前对话 |
| **ESC** | 设置菜单 | 打开/关闭设置界面 |
| **F3** | 存档/读档 | 打开存档管理界面 |
| **`** (反引号) | 控制台 | 打开/关闭开发者控制台（数字1左边） |
| **空格键** | 恢复视角 | 相机回到选中角色 |

---

## 🚶 角色控制

### 选择角色

**方法1：鼠标点击**
```
1. 用鼠标左键点击任意角色
2. 被选中的角色会被高亮显示
3. 现在可以用键盘控制该角色
```

**方法2：角色自动跟随**
```
选中角色后，相机会自动跟随该角色移动
```

### 移动角色

**方式1：键盘控制（WASD）**
```
W/↑  - 向上移动
A/←  - 向左移动  
S/↓  - 向下移动
D/→  - 向右移动

💡 提示：可以同时按两个键斜向移动（如W+D = 右上）
```

**方式2：鼠标点击移动**
```
1. 先用鼠标选中一个角色
2. 在地图任意位置点击鼠标左键
3. 角色会自动寻路走到该位置

🎯 优势：可以远距离移动，自动避开障碍物
```

### 坐下/站起

**Enter 键功能：**
- **靠近椅子时**：自动坐到椅子上（正确朝向）
- **已坐在椅子上**：从椅子上站起来
- **普通地面**：原地坐下/站起

💡 **提示**：Enter 键在主键盘区右侧，标记为"回车"或"Enter"

**高级操作：点击椅子**
```
1. 选中一个角色
2. 用鼠标左键点击远处的椅子
3. 角色会自动走过去并坐下

💡 提示：如果椅子已被占用，会显示提示
```

---

## 💬 对话系统

### 开始对话

**方法：T键**
```
1. 选中你的角色
2. 移动到另一个角色附近（100像素内）
3. 按 T 键
4. 对话气泡会出现

📍 距离要求：必须在100像素范围内
```

**对话提示：**
- ✅ 距离足够：对话开始
- ❌ 距离太远：显示"距离太远，无法对话"
- ⚠️ 已在对话中：不能重复开始

### 结束对话

**方法：L键**
```
按 L 键立即结束当前对话

💡 提示：也可以走远自动结束对话
```

### AI自动对话

**无需操作！**
```
AI角色会自动：
- 相互靠近
- 主动发起对话
- 根据性格和记忆聊天
- 结束对话后继续日常活动
```

---

## 📷 相机控制

### 鼠标操作

| 操作 | 功能 | 说明 |
|------|------|------|
| **鼠标右键拖拽** | 平移视角 | 按住右键移动鼠标 |
| **滚轮向上** | 放大 | 最大2.0倍 |
| **滚轮向下** | 缩小 | 最小0.5倍 |

### 键盘操作

| 按键 | 功能 | 说明 |
|------|------|------|
| **空格键** | 恢复视角 | 回到选中角色位置 |

### 相机模式

**自动跟随模式：**
```
- 选中角色后自动激活
- 相机平滑跟随角色移动
- 保持角色在屏幕中心
```

**手动模式：**
```
- 拖拽相机或滚轮缩放后激活
- 不再跟随角色
- 按空格键恢复自动跟随
```

---

## ⚙️ 系统快捷键

### 设置菜单（ESC）

**功能：**
```
- API设置（配置AI模型和密钥）
- 显示设置（窗口模式、分辨率）
- 音量控制
- 其他游戏设置
```

**操作：**
```
1. 按 ESC 打开设置
2. 使用鼠标选择选项
3. 再按 ESC 关闭设置
```

### 存档系统（F3）

**功能：**
```
- 保存游戏进度
- 加载历史存档
- 查看存档信息
- 删除旧存档
```

**存档内容：**
```
✅ 角色位置和状态
✅ 对话历史
✅ 记忆系统
✅ 任务进度
✅ 情感关系
```

### 开发者控制台（` 键）

**按键位置**：反引号键 ` 通常在键盘左上角，数字 1 的左边
- 中文键盘：标记为 ` / ~ （波浪号）
- 英文键盘：标记为 ` (grave accent)

💡 **按键提示**：如果按不出来，可能需要：
- 切换到英文输入法
- 或在 Godot 编辑器的"项目设置 → 输入映射"中改为其他键（如 F4）

**功能：**
```
- 查看游戏日志
- 执行调试命令
- 查看角色记忆
- 监控系统状态
```

**常用命令：**
```
memory <角色名>     - 查看角色记忆
task <角色名>       - 查看角色任务
status <角色名>     - 查看角色状态
clear              - 清空控制台
```

---

## 🖱️ 鼠标操作

### 完整鼠标操作表

| 操作 | 功能 | 详细说明 |
|------|------|---------|
| **左键点击角色** | 选择角色 | 切换控制权到该角色 |
| **左键点击地面** | 移动 | 选中角色自动寻路 |
| **左键点击椅子** | 坐下 | 角色走过去并坐下 |
| **右键拖拽** | 移动相机 | 按住拖动查看地图 |
| **滚轮滚动** | 缩放 | 放大/缩小视野 |

### 鼠标交互提示

**点击角色：**
```
✅ 成功：角色被选中，边框高亮
📍 相机：自动跟随选中角色
🎮 控制：可以用键盘控制移动
```

**点击地面：**
```
✅ 有效：角色开始寻路移动
🚫 无效：角色已在对话中或坐着
🛣️ 寻路：自动避开障碍物
```

**点击椅子：**
```
✅ 空椅子：角色走过去并坐下
❌ 已占用：显示"椅子已被占用"
🎯 自动：到达后自动调整朝向
```

---

## 🎨 操作技巧

### 技巧1：远程移动
```
1. 选中角色
2. 鼠标拖拽相机到目标位置
3. 点击目标位置
4. 按空格键恢复相机跟随

💡 适合：让角色走很远的距离
```

### 技巧2：观察其他角色
```
1. 右键拖拽相机到其他角色
2. 观察AI自主行为
3. 按空格键回到你的角色

💡 适合：观察AI角色互动
```

### 技巧3：快速对话
```
1. 点击目标角色附近的地面
2. 等待角色自动走近
3. 按 T 键立即开始对话

💡 适合：发起远距离对话
```

### 技巧5：原地坐下休息
```
1. 选中角色
2. 走到空旷地面（不靠近椅子）
3. 按 Enter 键原地坐下
4. 再按 Enter 键站起来

💡 适合：模拟角色休息或等待
```

### 技巧4：批量操作
```
1. 用控制台查看所有角色状态
2. 切换不同角色控制
3. 指挥多个角色完成任务

💡 适合：多角色协作场景
```

---

## 🔧 操作常见问题

### Q1: 为什么角色不移动？
**原因：**
- ❌ 没有选中角色
- ❌ 角色正在坐着（按空格站起来）
- ❌ 角色正在对话中（按L结束对话）

**解决：**
```
1. 确保角色被选中（有高亮）
2. 按空格键确保角色站起来
3. 按L键确保没有对话
```

### Q2: 为什么按T键没反应？
**原因：**
- ❌ 附近没有其他角色（100像素内）
- ❌ 已经在对话中
- ❌ 没有选中角色

**解决：**
```
1. 移动靠近目标角色
2. 确保距离<100像素
3. 确保已选中角色
```

### Q5: 为什么反引号 ` 按不出来？
**原因：**
- 中文输入法状态下可能失效
- 某些键盘布局需要 Shift 键

**解决方法：**
```
方法1：切换到英文输入法再按
方法2：在 Godot 编辑器中修改按键
  - 打开项目 → 项目设置 → 输入映射
  - 找到 toggle_console
  - 改为其他键（如 F4 或 Tab）
```

### Q6: Enter 键坐下后站不起来？
**原因：**
- 可能是动画问题或状态错误

**解决：**
```
1. 确保角色已选中
2. 再次按 Enter 键
3. 如果还不行，按 ESC 重置
```

### Q3: 相机怎么回不来？
**原因：**
- 手动模式被激活
- 没有选中角色

**解决：**
```
按空格键即可恢复！
```

### Q4: 如何同时控制多个角色？
**答案：**
```
不能同时控制，但可以快速切换：
1. 点击角色A → 下达命令
2. 点击角色B → 下达命令
3. 点击角色C → 下达命令
```

---

## 📊 按键映射配置

### 修改按键设置

**Godot编辑器中：**
```
1. 打开 项目 → 项目设置
2. 找到 输入映射 (Input Map)
3. 找到对应的动作名称
4. 点击右侧的按键图标修改
5. 按下新按键
6. 保存项目
```

**打包后的游戏中：**
- ⚠️ 打包后无法在游戏内修改按键
- 需要在 Godot 编辑器中修改后重新打包

### 当前映射表（实际配置）

| 动作名称 | 实际按键 | 按键代码 | 说明 |
|---------|---------|---------|------|
| `move_left` | A / ← | 65 / 4194319 | 向左移动 |
| `move_right` | D / → | 68 / 4194321 | 向右移动 |
| `move_up` | W / ↑ | 87 / 4194320 | 向上移动 |
| `move_down` | S / ↓ | 83 / 4194322 | 向下移动 |
| `sit` | **Enter** | **4194309** | ⭐ 坐下/站起 |
| `start_dialog` | T | 84 | 开始对话 |
| `end_dialog` | L | 76 | 结束对话 |
| `toggle_settings` | ESC | 4194305 | 设置菜单 |
| `toggle_save_load` | **F3** | **4194334** | 存档/读档 |
| `toggle_console` | **`** (反引号) | **96** | 控制台 |

### 🔧 推荐的按键修改

如果你觉得默认按键不方便，可以考虑：

| 原按键 | 推荐替换 | 原因 |
|--------|---------|------|
| ` (反引号) | **F4** | 更容易按到 |
| Enter | **空格** | 更符合习惯 |
| F3 | **F5** | 避免与浏览器快捷键冲突 |

---

## 🎮 最佳操作实践

### 新手推荐流程
```
1️⃣ 启动游戏
2️⃣ 按 ESC 配置API（首次必须）
3️⃣ 鼠标点击任意角色选中
4️⃣ 用 WASD 移动角色熟悉地图
5️⃣ 移动到另一角色附近按 T 对话
6️⃣ 尝试按 Enter 键坐下/站起
7️⃣ 观察AI角色自主行动
8️⃣ 按 F3 保存进度
```

### 进阶操作技巧
```
✅ 使用鼠标点击快速移动
✅ 右键拖拽浏览全地图
✅ 用 ` 键查看角色记忆
✅ 定期按F3保存进度
✅ 让AI角色自主互动，观察剧情
```

---

## 🔗 相关文档

- [API配置指南](./API_SETUP_GUIDE.md)
- [存档系统说明](./SAVE_SYSTEM.md)
- [开发者控制台](./CONSOLE_COMMANDS.md)

---

**祝游戏愉快！** 🎉

如有问题，请查看GitHub Issues或提交反馈。

